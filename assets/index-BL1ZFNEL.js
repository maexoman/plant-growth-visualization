(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function i(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=i(a);fetch(a.href,r)}})();class N{#e;#t;#s;#i;constructor(t,i){this.#e=t.int(14,18),this.#t=t.int(25,30),this.#s=i,this.#i=0}get position(){return this.#s}get size(){return this.#i}get petalCount(){return this.#e}isFullyGrown(){return this.#i>=this.#t}grow(){this.isFullyGrown()||(this.#i+=1)}}const C=Math.pow(10,8);function g(e){return Math.trunc(e*C)/C}class f{static zero=new f(0,0);#e;#t;constructor(t,i){this.#e=t,this.#t=i}get x(){return this.#e}get y(){return this.#t}magnitude(){return g(this.#s())}#s(){const t=this.#e*this.#e,i=this.#t*this.#t;return Math.sqrt(t+i)}normalized(){const t=this.#s();if(t===0)return new f(0,0);const i=this.#e/t,o=this.#t/t;return new f(g(i),g(o))}scale(t){const i=this.#e*t,o=this.#t*t;return new f(g(i),g(o))}static add(t,...i){let o=t.#e,a=t.#t;for(const r of i)o+=r.#e,a+=r.#t;return new f(g(o),g(a))}static subtract(t,i){const o=t.#e+i.#e,a=t.#t+i.#t;return new f(g(o),g(a))}static#i(t,i){return t.#e*i.#e+t.#t*i.#t}static angle(t,i){const o=this.#i(t,i),a=t.#s()*i.#s();return a===0?0:Math.acos(o/a)}static clampVectorAngle(t,i,o){const a=t.magnitude(),r=i.magnitude();if(a===0||r===0)return i;const n=t.normalized(),s=i.normalized();let d=n.x*s.x+n.y*s.y;if(d=Math.max(-1,Math.min(1,d)),Math.acos(d)<=o)return i;const b=(n.x*s.y-n.y*s.x>=0?1:-1)*o,y=Math.cos(b),m=Math.sin(b),P=new f(n.x*y-n.y*m,n.x*m+n.y*y);return new f(P.x*r,P.y*r)}static atAngle(t,i){const o=t.normalized(),a=Math.sin(i),r=Math.cos(i),n=o.x*r-o.y*a,s=o.x*a+o.y*r;return new f(n,s).normalized()}}class k{#e;#t;#s;#i;#o;#n;#r;#l;#a=null;constructor(t,i){this.#t=i.segmentMax,this.#s=i.segmentSize,this.#i=T(i.changeAngleMaxDeg),this.#e=t,this.#o=i.sunInfluence,this.#n=i.gravityInfluence,this.#r=i.randomJitterInfluence,this.#l=[]}isFullyGrown(){return this.segments.length>=this.#t}grow(t){if(this.isFullyGrown())return;const i=this.endPosition;let o=this.#d(t);this.#a!==null&&(o=f.clampVectorAngle(this.#a,o,this.#i)),this.#a=o;const a=o.scale(this.#s),r=f.add(i,a);this.#l.push({startPosition:i,endPosition:r})}get endPosition(){return this.#l.length>0?this.#l[this.#l.length-1].endPosition:this.#e}get normalizedLength(){return this.#l.length/this.#t}get length(){return this.#l.length*this.#s}calculateAuxillaryBud(t){if(this.#a===null)return null;const i=f.atAngle(this.#a,T(t));return{startPosition:this.endPosition,growDirection:i}}#d(t){return f.add(this.#h(t),this.#f(t),this.#u(t)).normalized()}#f(t){const i=t.calculateNormalizedSunRayTo(this.endPosition);return new f(i.x*this.#o.xInfluence,i.y*this.#o.yInfluence)}#h(t){return new f(t.gravity.x*this.#n.xInfluence,t.gravity.y*this.#n.yInfluence)}#u(t){if(this.#r.xInfluence===0&&this.#r.yInfluence===0)return f.zero;const i=t.random.int(1,100),o=t.random.int(0,100)>=50?-1:1,a=t.random.int(1,100),r=t.random.int(0,100)>=50?-1:1,n=new f(o*i,r*a).normalized();return new f(n.x*this.#r.xInfluence,n.y*this.#r.yInfluence)}get segments(){return this.#l}}function T(e){return e*Math.PI/180}class R{#e;#t;#s;#i;#o;#n;#r;constructor(t,i,o){this.#e=t.startPosition,this.#t=t.growDirection,this.#s=i,this.#i=0,this.#o=t.startPosition,this.#n=o,this.#r=0}isFullyGrown(){return this.#i>=this.#s&&this.#r>=this.#n}grow(){if(this.#i<this.#s){this.#a();return}if(this.#r<this.#n){this.#l();return}}#l(){this.#r+=2}#a(){this.#i+=1,this.#o=f.add(this.#e,this.#t.scale(this.#i))}get stemSegment(){return{startPosition:this.#e,endPosition:this.#o}}get area(){return this.#r}}class W{#e;#t;#s=0;#i;#o;#n=[];#r=null;#l;constructor(t){this.#e=t,this.#t="growing",this.#l=(i,o,a)=>{if(a.state==="dead")return{growthProbabilities:{stem:0,roots:0,leafs:0,flower:0},creationProbabilities:{leaf:0},transitionProbabilities:{toDead:0,toFlowering:0}};const r={stem:100,roots:100,leafs:100,flower:100},n={leaf:4},s={stem:r.stem,roots:r.roots,leafs:r.leafs,flower:r.flower},d={leaf:n.leaf},l={toDead:0,toFlowering:0};switch(i.lightHours===0?(s.stem-=0*r.stem,s.roots-=0*r.roots,s.leafs-=1*r.leafs,s.flower-=.5*r.flower,d.leaf-=1*d.leaf,l.toDead+=a.normalizedStemLength*(a.age/1e3)*50,l.toFlowering-=50):0<i.lightHours&&i.lightHours<=8?(s.stem-=.2*r.stem,s.roots-=0*r.roots,s.leafs-=.75*r.leafs,s.flower-=.75*r.flower,d.leaf-=.5*n.leaf,l.toDead+=0,l.toFlowering-=25):8<i.lightHours&&i.lightHours<=16?(s.stem-=0*r.stem,s.roots-=0*r.roots,s.leafs-=0*r.leafs,s.flower-=0*r.flower,d.leaf-=0*n.leaf,l.toDead+=0,l.toFlowering+=0):(s.stem-=.05*r.stem,s.roots-=0*r.roots,s.leafs-=.05*r.leafs,s.flower-=.05*r.flower,d.leaf-=.05*n.leaf,l.toDead+=0,l.toFlowering+=0),i.temperature<10?(s.stem-=1*r.stem,s.roots-=1*r.roots,s.leafs-=1*r.leafs,s.flower-=1*r.flower,d.leaf-=1*n.leaf,l.toDead+=i.temperature<5?75:50,l.toFlowering-=100):10<=i.temperature&&i.temperature<=20?(s.stem-=.5*r.stem,s.roots-=.5*r.roots,s.leafs-=.5*r.leafs,s.flower-=.5*r.flower,d.leaf-=.5*n.leaf,l.toDead+=0,l.toFlowering+=0):20<i.temperature&&i.temperature<=25?(s.stem-=0*r.stem,s.roots-=0*r.roots,s.leafs-=0*r.leafs,s.flower-=0*r.flower,d.leaf-=0*n.leaf,l.toDead+=0,l.toFlowering+=0):(s.stem-=.99*r.stem,s.roots-=.99*r.roots,s.leafs-=.99*r.leafs,s.flower-=.99*r.flower,d.leaf-=.99*n.leaf,l.toDead+=0,l.toFlowering+=0),o.carbonDioxide<=100?(s.stem-=1*r.stem,s.roots-=1*r.roots,s.leafs-=1*r.leafs,s.flower-=1*r.flower,d.leaf-=1*n.leaf,l.toDead+=25,l.toFlowering-=25):100<o.carbonDioxide&&o.carbonDioxide<=300?(s.stem-=.5*r.stem,s.roots-=.5*r.roots,s.leafs-=.5*r.leafs,s.flower-=.5*r.flower,d.leaf-=.5*n.leaf,l.toDead+=0,l.toFlowering+=0):300<o.carbonDioxide&&o.carbonDioxide<=600?(s.stem-=0*r.stem,s.roots-=0*r.roots,s.leafs-=0*r.leafs,s.flower-=0*r.flower,d.leaf-=0*n.leaf,l.toDead+=0,l.toFlowering+=0):(s.stem-=.05*r.stem,s.roots-=.05*r.roots,s.leafs-=.05*r.leafs,s.flower-=.05*r.flower,d.leaf-=.05*n.leaf,l.toDead+=0,l.toFlowering+=0),o.water){case 0:s.stem-=1*r.stem,s.roots-=1*r.roots,s.leafs-=1*r.leafs,s.flower-=1*r.flower,d.leaf-=1*n.leaf,l.toDead+=25,l.toFlowering-=25;break;case 1:s.stem-=.75*r.stem,s.roots-=.75*r.roots,s.leafs-=.75*r.leafs,s.flower-=.75*r.flower,d.leaf-=.75*n.leaf,l.toDead+=0,l.toFlowering+=0;break;case 2:s.stem-=0*r.stem,s.roots-=0*r.roots,s.leafs-=0*r.leafs,s.flower-=0*r.flower,d.leaf-=0*n.leaf,l.toDead+=0,l.toFlowering+=0;break;case 3:s.stem-=.75*r.stem,s.roots-=.75*r.roots,s.leafs-=.75*r.leafs,s.flower-=.75*r.flower,d.leaf-=.75*n.leaf,l.toDead+=0,l.toFlowering+=0;break;default:s.stem-=1*r.stem,s.roots-=1*r.roots,s.leafs-=1*r.leafs,s.flower-=1*r.flower,d.leaf-=1*n.leaf,l.toDead+=25,l.toFlowering-=25;break}switch(o.nutrients){case 0:s.stem-=1*r.stem,s.roots-=1*r.roots,s.leafs-=1*r.leafs,s.flower-=1*r.flower,d.leaf-=1*n.leaf,l.toDead+=25,l.toFlowering-=25;break;case 1:s.stem-=.75*r.stem,s.roots-=.75*r.roots,s.leafs-=.75*r.leafs,s.flower-=.75*r.flower,d.leaf-=.75*n.leaf,l.toDead+=0,l.toFlowering+=0;break;case 2:s.stem-=0*r.stem,s.roots-=0*r.roots,s.leafs-=0*r.leafs,s.flower-=0*r.flower,d.leaf-=0*n.leaf,l.toDead+=0,l.toFlowering+=0;break;case 3:s.stem-=.75*r.stem,s.roots-=.75*r.roots,s.leafs-=.75*r.leafs,s.flower-=.75*r.flower,d.leaf-=.75*n.leaf,l.toDead+=0,l.toFlowering+=0;break;default:s.stem-=1*r.stem,s.roots-=1*r.roots,s.leafs-=1*r.leafs,s.flower-=1*r.flower,d.leaf-=1*n.leaf,l.toDead+=25,l.toFlowering-=25;break}return a.normalizedStemLength>=1&&(l.toFlowering=99),a.state==="flowering"?d.leaf=0:s.flower=0,{growthProbabilities:{stem:Math.round(Math.min(Math.max(0,s.stem),100)),roots:Math.round(Math.min(Math.max(0,s.roots),100)),leafs:Math.round(Math.min(Math.max(0,s.leafs),100)),flower:Math.round(Math.min(Math.max(0,s.flower),100))},creationProbabilities:{leaf:Math.round(Math.min(Math.max(0,d.leaf),100))},transitionProbabilities:{toDead:Math.round(Math.min(Math.max(0,l.toDead),100)),toFlowering:Math.round(Math.min(Math.max(0,l.toFlowering),100))}}},this.#i=new k(new f(t.middleX,t.groundY),{segmentMax:this.#e.random.int(175,200),segmentSize:2,changeAngleMaxDeg:2,sunInfluence:{xInfluence:-3,yInfluence:-3},gravityInfluence:{xInfluence:0,yInfluence:-1},randomJitterInfluence:{xInfluence:0,yInfluence:0}}),this.#o=Array(5).fill(1).map(()=>new k(new f(t.middleX,t.groundY),{segmentMax:this.#e.random.int(175,200),segmentSize:1,changeAngleMaxDeg:this.#e.random.int(5,15),sunInfluence:{xInfluence:5,yInfluence:5},gravityInfluence:{xInfluence:0,yInfluence:1},randomJitterInfluence:{xInfluence:5,yInfluence:5}}))}update(t){if(this.#t==="dead"){console.log("dead");return}console.log("render"),this.#s+=1;const i=this.#e.random,o=this.#l(this.#e.environment,this.#e.resources,{age:this.#s,state:this.#t,normalizedStemLength:this.#i.normalizedLength,normalizedRootLength:this.#o.length===0?0:this.#o[0].normalizedLength,leafCount:this.#n.length});if(i.int(1,100)<o.growthProbabilities.stem&&this.#i.grow(this.#e),i.int(1,100)<o.growthProbabilities.roots&&this.#o.forEach(a=>a.grow(this.#e)),i.int(1,100)<o.growthProbabilities.leafs&&this.#n.forEach(a=>a.grow()),i.int(1,100)<o.growthProbabilities.flower&&this.#r!==null&&this.#r.grow(),i.int(1,100)<o.creationProbabilities.leaf){const a=this.#n.length%2==0?1:-1,r=this.#i.calculateAuxillaryBud(a*this.#e.random.int(20,60));if(r===null)return;this.#n.push(new R(r,this.#e.random.int(25,50),this.#e.random.int(30,50)))}i.int(1,100)<o.transitionProbabilities.toFlowering&&this.#r===null&&(this.#t="flowering",this.#r=new N(i,this.#i.endPosition)),i.int(1,100)<o.transitionProbabilities.toDead&&(this.#t="dead")}get state(){return this.#t}get flower(){return this.#r}get leafs(){return this.#n}get topPosition(){return this.#i.endPosition}get stemGSegments(){return this.#i.segments}get rootGSegments(){return this.#o.map(t=>t.segments)}}class B{#e;#t;#s;constructor(t){typeof t=="number"&&Number.isFinite(t)?this.#e=t:this.#e=G(0,16777215),this.#t=this.#e,this.#s=()=>{let i=this.#t+=1831565813;return i=Math.imul(i^i>>>15,i|1),i^=i+Math.imul(i^i>>>7,i|61),((i^i>>>14)>>>0)/4294967296}}get seed(){return this.#e}int(t,i){const o=Math.ceil(t),a=Math.floor(i);return Math.floor(this.#s()*(a-o+1)+o)}number(t,i){return Math.floor(this.#s()*(i-t+1)+t)}}function G(e,t){const i=Math.ceil(e),o=Math.floor(t);return Math.floor(Math.random()*(o-i+1)+i)}const A=3/4,Y=0/8,X=3/4;class J{random;#e;#t;middleX;groundY;sunY;#s;#i;#o;#n;#r;#l;#a;#d;constructor(t,i,o){this.random=t,this.#e=i,this.#t=o,this.middleX=Math.round(this.#e/2),this.sunY=Math.round(this.#t*(1-Y)),this.groundY=Math.round(this.#t*(1-A)),this.#s=new f(0,-10),this.#i=new f(this.middleX,this.sunY),this.#o=14,this.#n=22,this.#a=400,this.#l=2,this.#r=2,this.#d=new W(this)}get environment(){return{lightHours:this.#o,temperature:this.#n}}get resources(){return{water:this.#r,carbonDioxide:this.#a,nutrients:this.#l}}moveSun(t){if(!(-100<=t&&t<=100)){console.warn(`offset not in range [-100, 100]. offset: ${t}`);return}const o=t/100,a=X*this.#e,r=o*(1/2)*a;this.#i=new f(this.middleX+r,this.sunY)}setGravity(t){if(!(0<=t&&t<=10)){console.warn(`gravity not in range [0, 10]. gravity: ${t}`);return}this.#s=new f(0,-t)}setSunHours(t){if(!(0<=t&&t<=24)){console.warn(`sun hours not in range [0, 24]. sun hours: ${t}`);return}if(!(t%2==0)){console.warn("sun hours must be a multiple of two");return}this.#o=t}setTemperature(t){if(!(0<=t&&t<=40)){console.warn(`temperature not in range [0, 40]. temperature: ${t}`);return}if(!(t%5==0)){console.warn("temperature must be a multiple of five");return}this.#n=t}setCarbonDioxide(t){if(!(0<=t&&t<=40)){console.warn(`carbonDioxide not in range [0, 900]. carbonDioxide: ${t}`);return}if(!(t%100==0)){console.warn("carbonDioxide must be a multiple of 100");return}this.#a=t}setWater(t){if(!(0<=t&&t<=4)){console.warn(`water not in range [0, 4]. water: ${t}`);return}this.#r=t}setNutrients(t){if(!(0<=t&&t<=4)){console.warn(`nutrients not in range [0, 4]. nutrients: ${t}`);return}this.#l=t}update(t){this.#d.update(t)}reset(){this.random=new B(this.random.seed),this.#d=new W(this)}isExposedToSun(t){return t.y>=this.groundY}calculateNormalizedSunRayTo(t){if(!this.isExposedToSun(t))return f.zero;const i=t.x-this.#i.x,o=t.y-this.#i.y;return new f(i,o).normalized()}get sunPosition(){return this.#i}get gravity(){return this.#s}get sunRay(){return this.calculateNormalizedSunRayTo(new f(this.middleX,this.groundY))}get plant(){return this.#d}get flower(){return this.#d.flower}get leafs(){return this.#d.leafs}get stemGSegments(){return this.#d.stemGSegments}get rootGSegments(){return this.#d.rootGSegments}}const w=new f(0,-10);function H(){const e=document.getElementById("canvas"),t=document.getElementById("dead-x"),i=e.getContext("2d"),o=document.getElementById("ghost-canvas"),a=o.getContext("2d"),r=new B,n=new J(r,e.width,e.height);let s=!1;window.gr=.75;let d=!1,l;function h(u){l===void 0&&(l=u);const S=u-l;try{s===!0&&n.update(S),$(i,n),n.plant.state==="dead"&&d===!1&&(_(a,n,n.plant),o.style.display="block",t.style.display="flex",d=!0)}catch(E){s=!1,console.error(E)}requestAnimationFrame(h),l=u}requestAnimationFrame(h),document.getElementById("btn-start").addEventListener("click",function(){s=!0}),document.getElementById("btn-reset").addEventListener("click",function(){s=!1,t.style.display="none",o.style.display="none",a.clearRect(0,0,a.canvas.width,a.canvas.height),d=!1,n.reset()});const y=document.getElementById("sld-sun");y.addEventListener("input",function(){let u=0;try{if(u=parseInt(y.value,10),Number.isNaN(u))return}catch{return}n.moveSun(u)});const m=document.getElementById("sld-gravity");m.value=(-n.gravity.y).toString(10),m.addEventListener("input",function(){let u=0;try{if(u=parseInt(m.value,10),Number.isNaN(u))return}catch{return}n.setGravity(u)});const P=document.getElementById("sld-sun-hours");P.value=n.environment.lightHours.toString(10),P.addEventListener("input",function(){let u=0;try{if(u=parseInt(P.value,10),Number.isNaN(u))return}catch{return}n.setSunHours(u)});const v=document.getElementById("sld-temperature");v.value=n.environment.temperature.toString(10),v.addEventListener("input",function(){let u=0;try{if(u=parseInt(v.value,10),Number.isNaN(u))return}catch{return}n.setTemperature(u)});const I=document.getElementById("sld-carbon-dioxide");I.value=n.resources.carbonDioxide.toString(10),I.addEventListener("input",function(){let u=0;try{if(u=parseInt(I.value,10),Number.isNaN(u))return}catch{return}n.setCarbonDioxide(u)});const p=document.getElementById("sld-water");p.value=n.resources.water.toString(10),p.addEventListener("input",function(){let u=0;try{if(u=parseInt(p.value,10),Number.isNaN(u))return}catch{return}n.setWater(u)});const M=document.getElementById("sld-nutrients");M.value=n.resources.nutrients.toString(10),M.addEventListener("input",function(){let u=0;try{if(u=parseInt(M.value,10),Number.isNaN(u))return}catch{return}n.setNutrients(u)})}function $(e,t){let i=e.fillStyle,o=e.lineWidth,a=e.strokeStyle;const{width:r,height:n}=e.canvas;e.clearRect(0,0,r,n),i=e.fillStyle,e.fillStyle="lightblue",e.fillRect(0,0,r,n-t.groundY),e.fillStyle=i,i=e.fillStyle,e.fillStyle="#987654",e.fillRect(0,n-t.groundY,r,n),e.fillStyle=i,o=e.lineWidth,a=e.strokeStyle,e.lineWidth=4,e.strokeStyle="#4c3228",e.beginPath(),e.moveTo(0,n-t.groundY),e.lineTo(r,n-t.groundY),e.stroke(),e.closePath(),e.lineWidth=o,e.strokeStyle=a,o=e.lineWidth,a=e.strokeStyle,e.lineWidth=8,e.strokeStyle="#ffde21";const s=t.sunRay.scale(200),d=new f(s.y,-s.x).normalized().scale(55),l=d.scale(-1),h=f.add(t.sunPosition,s);e.beginPath(),e.moveTo(t.sunPosition.x,n-t.sunPosition.y),e.lineTo(h.x,n-h.y);const c=f.add(t.sunPosition,d),b=f.add(h,d);e.moveTo(c.x,n-c.y),e.lineTo(b.x,n-b.y);const y=f.add(t.sunPosition,l),m=f.add(h,l);e.moveTo(y.x,n-y.y),e.lineTo(m.x,n-m.y),e.stroke(),e.closePath(),e.lineWidth=o,e.strokeStyle=a,i=e.fillStyle,e.fillStyle="lightblue",e.beginPath(),e.arc(t.sunPosition.x,n-t.sunPosition.y,125,0,2*Math.PI),e.fill(),e.closePath(),e.fillStyle=i,i=e.fillStyle,e.fillStyle="#ffde21",e.beginPath(),e.arc(t.sunPosition.x,n-t.sunPosition.y,100,0,2*Math.PI),e.fill(),e.closePath(),e.fillStyle=i,i=e.fillStyle,e.fillStyle="#654321",q(e,t.middleX,n-(t.groundY-15),15,20),e.fillStyle=i,K(e,t,t.plant)}function q(e,t,i,o,a){U(e,t-o/2,i-a/2,o,a)}function U(e,t,i,o,a){var r=.5522848,n=o/2*r,s=a/2*r,d=t+o,l=i+a,h=t+o/2,c=i+a/2;e.fillStyle="#654321",e.beginPath(),e.moveTo(t,c),e.bezierCurveTo(t,c-s,h-n,i,h,i),e.bezierCurveTo(h+n,i,d,c-s,d,c),e.bezierCurveTo(d,c+s,h+n,l,h,l),e.bezierCurveTo(h-n,l,t,c+s,t,c),e.fill()}function K(e,t,i){z(e,i,{positionOffset:w,thickness:6,color:"#d1bc8a",borderWidth:2,borderColor:"#000000"}),O(e,i,{positionOffset:w,thickness:8,color:"#008000",borderWidth:2,borderColor:"#000000"}),D(e,t,i.leafs,{positionOffset:w,color:"#008000",borderWidth:2,borderColor:"#000000"}),L(e,i.flower,{positionOffset:w,carpelSizeFraction:2/3,carpelBorderWidth:2,carpelColor:"#654321",carpelBorderColor:"#000000",petalWidth:10,petalBorderWidth:2,oddPetalColor:"#FFDA03",oddPetalBorderColor:"#000000",evenPetalColor:"#EDC001",evenPetalBorderColor:"#000000"})}function _(e,t,i){const o="#ffffff";z(e,i,{positionOffset:w,thickness:8,color:o,borderWidth:0,borderColor:"#00000000"}),O(e,i,{positionOffset:w,thickness:10,color:o,borderWidth:0,borderColor:"#00000000"}),D(e,t,i.leafs,{positionOffset:w,color:o,borderWidth:2,borderColor:o}),L(e,i.flower,{positionOffset:w,carpelSizeFraction:2/3,carpelBorderWidth:0,carpelColor:o,carpelBorderColor:"#00000000",petalWidth:12,petalBorderWidth:0,oddPetalColor:o,oddPetalBorderColor:"#00000000",evenPetalColor:o,evenPetalBorderColor:"#00000000"})}function D(e,t,i,o){for(const a of i){if(a.area<=0)continue;const r=a.stemSegment.endPosition,n=r.x<=t.middleX,s=f.add(r,o.positionOffset);n?j(e,s,a.area,{color:o.color,borderColor:o.borderColor,borderWidth:o.borderWidth}):Q(e,s,a.area,{color:o.color,borderColor:o.borderColor,borderWidth:o.borderWidth})}}function O(e,t,i){i.borderWidth>0&&F(e,t,{positionOffset:i.positionOffset,thickness:i.thickness+i.borderWidth,color:i.borderColor}),F(e,t,{positionOffset:i.positionOffset,thickness:i.thickness,color:i.color})}function F(e,t,i){if(t.stemGSegments.length===0&&t.leafs.length===0)return;const o=e.fillStyle,a=e.lineWidth,r=e.strokeStyle,n=e.lineCap;if(e.lineWidth=i.thickness,e.strokeStyle=i.color,e.lineCap="round",t.stemGSegments.length>0){const s=f.add(t.stemGSegments[0].startPosition,i.positionOffset);e.beginPath(),e.moveTo(s.x,e.canvas.height-s.y);for(let d=1;d<t.stemGSegments.length;d+=1){const l=f.add(t.stemGSegments[d].endPosition,i.positionOffset);e.lineTo(l.x,e.canvas.height-l.y)}e.stroke()}for(const s of t.leafs){const d=f.add(s.stemSegment.startPosition,i.positionOffset),l=f.add(s.stemSegment.endPosition,i.positionOffset);e.beginPath(),e.moveTo(d.x,e.canvas.height-d.y),e.lineTo(l.x,e.canvas.height-l.y),e.stroke()}e.lineWidth=a,e.lineCap=n,e.strokeStyle=r,e.fillStyle=o}function z(e,t,i){if(t.rootGSegments.length===0)return;const o=e.fillStyle,a=e.lineWidth,r=e.strokeStyle,n=e.lineCap;e.lineCap="round";for(const s of t.rootGSegments){if(s.length===0)continue;const d=f.add(s[0].startPosition,i.positionOffset);if(i.borderWidth){e.lineWidth=i.thickness+i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(d.x,e.canvas.height-d.y);for(let l=1;l<s.length;l+=1){const h=f.add(s[l].endPosition,i.positionOffset);e.lineTo(h.x,e.canvas.height-h.y)}e.stroke()}e.lineWidth=i.thickness,e.strokeStyle=i.color,e.beginPath(),e.moveTo(d.x,e.canvas.height-d.y);for(let l=1;l<s.length;l+=1){const h=f.add(s[l].endPosition,i.positionOffset);e.lineTo(h.x,e.canvas.height-h.y)}e.stroke()}e.lineWidth=a,e.lineCap=n,e.strokeStyle=r,e.fillStyle=o}function L(e,t,i){if(t===null)return;const o=e.fillStyle,a=e.lineWidth,r=e.strokeStyle,n=e.lineCap,s=f.add(t.position,i.positionOffset);e.lineCap="round";for(let d=0;d<t.petalCount;d+=1){const l=d*360/t.petalCount,h=f.atAngle(new f(0,-1),l*Math.PI/180),c=f.add(s,h.scale(t.size));i.petalBorderWidth>0&&(e.lineWidth=i.petalWidth+i.petalBorderWidth,e.strokeStyle=d%2==0?i.evenPetalBorderColor:i.oddPetalBorderColor,e.beginPath(),e.moveTo(s.x,e.canvas.height-s.y),e.lineTo(c.x,e.canvas.height-c.y),e.stroke()),e.lineWidth=i.petalWidth,e.strokeStyle=d%2==0?i.evenPetalColor:i.oddPetalColor,e.beginPath(),e.moveTo(s.x,e.canvas.height-s.y),e.lineTo(c.x,e.canvas.height-c.y),e.stroke()}e.lineWidth=i.carpelBorderWidth,e.strokeStyle=i.carpelBorderColor,e.fillStyle=i.carpelColor,e.beginPath(),e.arc(s.x,e.canvas.height-s.y,t.size*i.carpelSizeFraction,0,2*Math.PI),e.fill(),i.carpelBorderWidth>0&&e.stroke(),e.lineWidth=a,e.lineCap=n,e.strokeStyle=r,e.fillStyle=o}function j(e,t,i,o){const a=e.fillStyle,r=e.lineWidth,n=e.strokeStyle,s=1/28*i,d=1/30*i,l=t.x-(15*s-s),h=e.canvas.height-t.y-(9*d-d);e.lineWidth=o.borderWidth,e.strokeStyle=o.borderColor,e.fillStyle=o.color,e.beginPath(),e.lineTo(17*s+l,d+h),e.lineTo(6*s+l,2*d+h),e.lineTo(3*s+l,10*d+h),e.lineTo(s+l,30*d+h),e.lineTo(17*s+l,19*d+h),e.lineTo(26*s+l,13*d+h),e.lineTo(28*s+l,7*d+h),e.lineTo(15*s+l,9*d+h),e.closePath(),e.stroke(),e.fill(),e.lineWidth=r,e.strokeStyle=n,e.fillStyle=a}function Q(e,t,i,o){const a=e.fillStyle,r=e.lineWidth,n=e.strokeStyle,s=1/30*i,d=1/48*i,l=t.x-(16*s-s),h=e.canvas.height-t.y-(20*d-d);e.lineWidth=o.borderWidth,e.strokeStyle=o.borderColor,e.fillStyle=o.color,e.beginPath(),e.lineTo(s+l,10*d+h),e.lineTo(16*s+l,20*d+h),e.lineTo(19*s+l,d+h),e.lineTo(30*s+l,15*d+h),e.lineTo(28*s+l,48*d+h),e.lineTo(4*s+l,29*d+h),e.closePath(),e.stroke(),e.fill(),e.lineWidth=r,e.strokeStyle=n,e.fillStyle=a}H();
